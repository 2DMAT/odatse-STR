<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Direct Problem Solver &#8212; ODAT-SE solver module: odatse-STR for sim-trhepd-rheed 1.0.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/haiku.css?v=fce32b03" />
    <script src="../_static/documentation_options.js?v=8d563738"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Optimization by Nelder-Mead method" href="minsearch.html" />
    <link rel="prev" title="Tutorials" href="index.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="../index.html">
          <span>ODAT-SE solver module: odatse-STR for sim-trhepd-rheed 1.0.0 documentation</span></a></h1>
        <h2 class="heading"><span>Direct Problem Solver</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="Top">
      
        <p>
        «&#160;&#160;<a href="index.html">Tutorials</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="minsearch.html">Optimization by Nelder-Mead method</a>&#160;&#160;»
        </p>

      </div>
      <div class="content" role="main">
        
        
  <section id="direct-problem-solver">
<h1>Direct Problem Solver<a class="headerlink" href="#direct-problem-solver" title="Link to this heading">¶</a></h1>
<p>odatse-STR module provides a wrapper to the forward problem solvers of ODAT-SE for the program <a class="reference external" href="https://github.com/sim-trhepd-rheed/sim-trhepd-rheed/">sim-trhepd-rheed</a> , which calculates the intensity of reflection fast (positron) electron diffraction (RHEED, TRHEPD) (A. Ichimiya, Jpn. J. Appl. Phys. 22, 176 (1983); 24, 1365 (1985)).
In this tutorial, we will present several examples of analyses using algorithms with sim-trhepd-rheed.
First, we will explain how to install and test sim-trhepd-rheed. For details, see the official web page for <a class="reference external" href="https://github.com/sim-trhepd-rheed/sim-trhepd-rheed/">sim-trhepd-rheed</a>.</p>
<section id="download-and-install">
<h2>Download and Install<a class="headerlink" href="#download-and-install" title="Link to this heading">¶</a></h2>
<p>First, you need to obtain the source files from the repository, and move to the directory of odatse-STR module.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/2DMAT/odatse-STR.git
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>odatse-STR
</pre></div>
</div>
<p>Next, you need to download the source files of sim-trhepd-rheed from their repository, and build it.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/sim-trhepd-rheed/sim-trhepd-rheed
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>sim-trhepd-rheed/src
$<span class="w"> </span>make
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Makefile</span></code> should be modified according to your environment.
When it is successful, <code class="docutils literal notranslate"><span class="pre">bulk.exe</span></code> and <code class="docutils literal notranslate"><span class="pre">surf.exe</span></code> will be created.</p>
</section>
<section id="calculation-execution">
<h2>Calculation execution<a class="headerlink" href="#calculation-execution" title="Link to this heading">¶</a></h2>
<p>In sim-trhepd-rheed, the bulk part of the surface structure is first calculated with <code class="docutils literal notranslate"><span class="pre">bulk.exe</span></code>.
Then, using the results of the <code class="docutils literal notranslate"><span class="pre">bulk.exe</span></code> calculation (the <code class="docutils literal notranslate"><span class="pre">bulkP.b</span></code> file), the surface portion of the <code class="docutils literal notranslate"><span class="pre">surf.exe</span></code> surface structure is calculated.</p>
<p>In this tutorial, we will actually do the TRHEPD calculation.
The sample input files are located in <code class="docutils literal notranslate"><span class="pre">sample/solver</span></code> of odatse-STR.
First, copy this folder to a suitable working folder <code class="docutils literal notranslate"><span class="pre">work</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cp -r sample/solver work
$ cd work
</pre></div>
</div>
<p>Next, copy <code class="docutils literal notranslate"><span class="pre">bulk.exe</span></code> and <code class="docutils literal notranslate"><span class="pre">surf.exe</span></code> to <code class="docutils literal notranslate"><span class="pre">work</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cp ../sim-trhepd-rheed/src/bulk.exe .
$ cp ../sim-trhepd-rheed/src/surf.exe .
</pre></div>
</div>
<p>Execute <code class="docutils literal notranslate"><span class="pre">bulk.exe</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ./bulk.exe
</pre></div>
</div>
<p>Then, the bulk file <code class="docutils literal notranslate"><span class="pre">bulkP.b</span></code> will be generated.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ls
bulk.exe bulk.txt bulkP.b surf.exe surf.txt
</pre></div>
</div>
<p>Next, execute <code class="docutils literal notranslate"><span class="pre">surf.exe</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ./surf.exe
</pre></div>
</div>
<p>After the execution, the files <code class="docutils literal notranslate"><span class="pre">surf-bulkP.md</span></code>, <code class="docutils literal notranslate"><span class="pre">surf-bulkP.s</span></code> and <code class="docutils literal notranslate"><span class="pre">SURFYYYYMMDD-HHMMSSlog.txt</span></code> will be generated. (YYYYMMDD and HHMMSS stand for the execution date and time, respectively.)</p>
</section>
<section id="visualization-of-calculation-result">
<h2>Visualization of calculation result<a class="headerlink" href="#visualization-of-calculation-result" title="Link to this heading">¶</a></h2>
<p>The contents of <code class="docutils literal notranslate"><span class="pre">surf-bulkP.s</span></code> are shown as follow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#azimuths,g-angles,beams</span>
<span class="mi">1</span> <span class="mi">56</span> <span class="mi">13</span>
<span class="c1">#ih,ik</span>
<span class="n">deg</span><span class="p">,</span><span class="mi">6</span> <span class="mi">0</span><span class="p">,</span><span class="mi">5</span> <span class="mi">0</span><span class="p">,</span><span class="mi">4</span> <span class="mi">0</span><span class="p">,</span><span class="mi">3</span> <span class="mi">0</span><span class="p">,</span><span class="mi">2</span> <span class="mi">0</span><span class="p">,</span><span class="mi">1</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">3</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">4</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">5</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">6</span> <span class="mi">0</span><span class="p">,</span>
  <span class="mf">5.0000E-01</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">1.5946E-02</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>
  <span class="mf">6.0000E-01</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">1.8701E-02</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>
  <span class="mf">7.0000E-01</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">2.1202E-02</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>
  <span class="mf">8.0000E-01</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">2.1711E-03</span><span class="p">,</span>  <span class="mf">1.9273E-02</span><span class="p">,</span>  <span class="mf">2.1711E-03</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>
  <span class="mf">9.0000E-01</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">4.3965E-03</span><span class="p">,</span>  <span class="mf">1.7006E-02</span><span class="p">,</span>  <span class="mf">4.3965E-03</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>
  <span class="mf">1.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">6.3263E-03</span><span class="p">,</span>  <span class="mf">1.4952E-02</span><span class="p">,</span>  <span class="mf">6.3263E-03</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>  <span class="mf">0.0000E+00</span><span class="p">,</span>
<span class="o">...</span>
</pre></div>
</div>
<p>From the above file, a rocking curve is created whose horizontal axis is the angle (first column of data after row 5) and the vertical axis shows the intensity of the (0,0) peak (eighth column of data after row 5).
You can use Gnuplot or other graphing software, but here we use the program <code class="docutils literal notranslate"><span class="pre">plot_bulkP.py</span></code> in the <code class="docutils literal notranslate"><span class="pre">script</span></code> folder.
Run it as follows.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python3 ../script/plot_bulkP.py
</pre></div>
</div>
<p>Then, <code class="docutils literal notranslate"><span class="pre">plot_bulkP.png</span></code> will be created as follows.</p>
<figure class="align-default" id="id2">
<img alt="../_images/plot_bulkP.png" src="../_images/plot_bulkP.png" />
<figcaption>
<p><span class="caption-number">Fig. 1 </span><span class="caption-text">Rocking curve of Si(001)-2x1 surface.</span><a class="headerlink" href="#id2" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>We will make convolution and normalization to these diffraction intensity data of the 00 peaks.
Prepare <code class="docutils literal notranslate"><span class="pre">surf-bulkP.s</span></code> and run <code class="docutils literal notranslate"><span class="pre">make_convolution.py</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python3 ../script/make_convolution.py
</pre></div>
</div>
<p>When executed, the following file <code class="docutils literal notranslate"><span class="pre">convolution.txt</span></code> will be created.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">0.500000</span> <span class="mf">0.010818010</span>
<span class="mf">0.600000</span> <span class="mf">0.013986716</span>
<span class="mf">0.700000</span> <span class="mf">0.016119093</span>
<span class="mf">0.800000</span> <span class="mf">0.017039022</span>
<span class="mf">0.900000</span> <span class="mf">0.017084666</span>
  <span class="o">...</span> <span class="n">skipped</span> <span class="o">...</span>
<span class="mf">5.600000</span> <span class="mf">0.000728539</span>
<span class="mf">5.700000</span> <span class="mf">0.000530758</span>
<span class="mf">5.800000</span> <span class="mf">0.000412908</span>
<span class="mf">5.900000</span> <span class="mf">0.000341740</span>
<span class="mf">6.000000</span> <span class="mf">0.000277553</span>
</pre></div>
</div>
<p>The first column is the viewing angle, and the second column is the normalized 00-peak diffraction intensity data written in <code class="docutils literal notranslate"><span class="pre">surf-bulkP.s</span></code> with a convolution of half-width 0.5.</p>
<p>By using <code class="docutils literal notranslate"><span class="pre">plot_convolution.py</span></code>, a figure <code class="docutils literal notranslate"><span class="pre">plot_convolution.png</span></code> will be generated as follows.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python3 ../script/plot_convolution.py
</pre></div>
</div>
<figure class="align-default" id="id3">
<img alt="../_images/plot_convolution.png" src="../_images/plot_convolution.png" />
<figcaption>
<p><span class="caption-number">Fig. 2 </span><span class="caption-text">Rocking curve of Si(001)-2x1 surface that is made convolution of half-width 0.5 and normalized.</span><a class="headerlink" href="#id3" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
</section>


      </div>
      <div class="bottomnav" role="navigation" aria-label="Bottom">
      
        <p>
        «&#160;&#160;<a href="index.html">Tutorials</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="minsearch.html">Optimization by Nelder-Mead method</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
    &#169; Copyright 2020-, Institute for Solid State Physics, University of Tokyo.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    </div>
  </body>
</html>